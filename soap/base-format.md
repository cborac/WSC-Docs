# Base Format

Throughout all SOAP requests the request and the response body follow these schemes:

## Request Body

The request body is sent by the Wii Console to SOAP Server for each action. Even though all actions require specific fields, the fields provided below are always present

```xml
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
                   xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                   xmlns:Service="urn:Service.wsapi.broadon.com"> <!-- eg. xmlns:ias="urn:ias.wsapi.broadon.com" -->
     <SOAP-ENV:Body>
          <Service:Action xsi:type="Service:ActionRequestType"> <!-- eg. <ias:CheckRegistration xsi:type="ias:CheckRegistrationRequestType"> -->
               <Service:Version>2.0<Service:Version>   <!-- eg. <ias:Version> -->
               <Service:MessageId>ECSHOP-$DeviceId-$MessageId</Service:MessageId>
               <Service:DeviceId>$DeviceId</Service:DeviceId>
               <Service:DeviceToken>$DeviceToken</Service:DeviceToken>
               <Service:AccountId>$DeviceToken</Service:AccountId>
               <Service:Region>$Region</Service:Region>
               <Service:Country>$Country</Service:Country>
               <Service:Language>$Language</Service:Language>
               <Service:SerialNo>$SerialNo</Service:SerialNo>
          </Service:Action xsi:type="{Service}:{Action}RequestType">
     </SOAP-ENV:Body>
</SOAP-ENV:Envelope>
```

- `Version` is always `2.0` for all WSC SOAP Services
- `MessageId` is generated by the console and the exact `MessageId` must be provided within the response
- `DeviceId` is unique to each device
- `DeviceToken` verifies the integrity of WSC session and is re-generated each session
- `Region` is the region of the device, for instance `EUR`
- `Country` is the country code selected in Wii Settings, for instance `GB`
- `Language` is the Wii System's language and the language displayed at WSC, for instance `en`
- `SerialNo` is the Wii's serial number and is used as the main identificiant for transfers etc.

## Response Body

The response body is sent by the SOAP Server in response to Wii's Action Request.

```xml
<?xml version="1.0" encoding="UTF-8"?>
     <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
          xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <soapenv:Body>
               <ActionResponse xmlns="urn:Service.wsapi.broadon.com"> <!-- eg. <CheckRegistrationResponse xmlns="urn:ias.wsapi.broadon.com"> -->
                    <Version>2.0</Version>
                    <DeviceId>$DeviceId</DeviceId>
                    <MessageId>ECSHOP-$DeviceId-$MessageId</MessageId>
                    <TimeStamp>$Timestamp</TimeStamp>
                    <ErrorCode>$ErrorCode</ErrorCode>
                    <ServiceStandbyMode>false</ServiceStandbyMode>
               </ActionResponse>
     </soapenv:Body>
</soapenv:Envelope>
```

- `Version` is always `2.0` for all WSC SOAP Services
- `MessageId` must be the exact `MessageId` given in the request body
- `DeviceId` also the same as `MessageId`
- `TimeStamp` is ms passed since the Unix-Epoch
- `ErrorCode` is a number representing whether there were any errors, 0 means no error
- `ServiceStandbyMode` ?
  
Also `ErrorMessage` is present if there is a non-zero `ErrorCode`
